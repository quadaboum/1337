<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Dashboard - Topaz</title>
    <style>
        body {
            background-color: #0a0a0a;
            color: #e0e0e0;
            font-family: monospace;
            text-align: center;
            padding: 2em;
        }
        h1 {
            color: #ff0000;
            text-shadow: 0 0 5px #ff0000;
        }
        table {
            margin: 2em auto;
            border-collapse: collapse;
            width: 95%;
        }
        th, td {
            border: 1px solid #333;
            padding: 0.5em;
        }
        th {
            background-color: #111;
        }
        tr:nth-child(even) {
            background-color: #1a1a1a;
        }
        .glitch {
            animation: glitch 1s infinite;
        }
        @keyframes glitch {
            0% { text-shadow: 1px 1px red; }
            20% { text-shadow: -1px -1px blue; }
            40% { text-shadow: 1px -1px lime; }
            60% { text-shadow: -1px 1px red; }
            80% { text-shadow: 1px 1px blue; }
            100% { text-shadow: -1px -1px lime; }
        }
        .generate-btn {
            margin-top: 2em;
            padding: 1em 2em;
            background-color: #ff0000;
            color: white;
            border: none;
            cursor: pointer;
        }
        .generate-btn:hover {
            background-color: #cc0000;
        }
        .code-list {
            margin-top: 2em;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <h1 class="glitch">DASHBOARD DIVIN DE TOPAZ</h1>
    <form method="POST">
        <button class="generate-btn" name="generate" type="submit">Générer une nouvelle clé</button>
    </form>
    <div class="code-list">
        <h3>Clés générées</h3>
        <ul>
            {% for code, used, used_by in codes %}
            <li>{{ code }} - {% if used %}UTILISÉ par {{ used_by or "?" }}{% else %}<strong>NON UTILISÉ</strong>{% endif %}</li>
            {% endfor %}
        </ul>
    </div>

    <h3>Utilisateurs</h3>
    <table>
        <thead>
            <tr>
                <th>Pseudo</th>
                <th>Niveau</th>
                <th>Prestige</th>
                <th>Argent</th>
                <th>Dons</th>
                <th>IP</th>
                <th>User-Agent</th>
            </tr>
        </thead>
        <tbody>
            {% for u in users %}
            <tr>
                <td>{{ u[1] }}</td>
                <td>{{ u[2] }}</td>
                <td>{{ u[3] }}</td>
                <td>{{ u[4] }}</td>
                <td>{{ u[5] }}</td>
                <td>{{ u[6] }}</td>
                <td>{{ u[7][:40] }}...</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>
